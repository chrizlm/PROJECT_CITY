{"ast":null,"code":"import axios from \"axios\";\nimport jwt from 'jwt-decode';\nconst API_URL = \"http://localhost:8080\";\n\nconst register = (motoristID, firstName, lastName, email, gender, password) => {\n  return axios.post(API_URL + \"/apiv1/motorist/save\", {\n    motoristID,\n    firstName,\n    lastName,\n    email,\n    gender,\n    password\n  });\n};\n\nconst login = (username, password) => {\n  return axios.post(API_URL + \"/api/login\", {\n    username,\n    password\n  }).then(response => {\n    if (response.data.accessToken) {\n      const decodedUser = jwt(response.data); //localStorage.setItem(\"decodedUser\", decodedUser);\n\n      localStorage.setItem(\"user\", JSON.stringify(response.data)); //dispatch(actions.authSuccess(response.data.accessToken, decodedUser));\n    }\n\n    return response.data;\n  });\n};\n\nconst logout = () => {\n  localStorage.removeItem(\"user\");\n};\n\nconst getCurrentUser = () => {\n  //return JSON.parse(localStorage.getItem(\"user\"));\n  return JSON.parse(localStorage.getItem(\"decodedUser\"));\n};\n\nexport default {\n  register,\n  login,\n  logout,\n  getCurrentUser\n};","map":{"version":3,"sources":["/Users/christopherlijoodi/Desktop/CITYPARK/src/service/auth.service.js"],"names":["axios","jwt","API_URL","register","motoristID","firstName","lastName","email","gender","password","post","login","username","then","response","data","accessToken","decodedUser","localStorage","setItem","JSON","stringify","logout","removeItem","getCurrentUser","parse","getItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,YAAhB;AACA,MAAMC,OAAO,GAAG,uBAAhB;;AAEA,MAAMC,QAAQ,GAAG,CAACC,UAAD,EAAaC,SAAb,EAAwBC,QAAxB,EAAkCC,KAAlC,EAAyCC,MAAzC,EAAiDC,QAAjD,KAA6D;AAC1E,SAAOT,KAAK,CAACU,IAAN,CAAWR,OAAO,GAAG,sBAArB,EAA6C;AAChDE,IAAAA,UADgD;AAEhDC,IAAAA,SAFgD;AAGhDC,IAAAA,QAHgD;AAIhDC,IAAAA,KAJgD;AAKhDC,IAAAA,MALgD;AAMhDC,IAAAA;AANgD,GAA7C,CAAP;AAQH,CATD;;AAWA,MAAME,KAAK,GAAG,CAACC,QAAD,EAAWH,QAAX,KAAuB;AACjC,SAAOT,KAAK,CAACU,IAAN,CAAWR,OAAO,GAAG,YAArB,EAAmC;AACtCU,IAAAA,QADsC;AAEtCH,IAAAA;AAFsC,GAAnC,EAGJI,IAHI,CAGEC,QAAD,IAAc;AAClB,QAAGA,QAAQ,CAACC,IAAT,CAAcC,WAAjB,EAA6B;AACzB,YAAMC,WAAW,GAAGhB,GAAG,CAACa,QAAQ,CAACC,IAAV,CAAvB,CADyB,CAEzB;;AAEAG,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeP,QAAQ,CAACC,IAAxB,CAA7B,EAJyB,CAMzB;AACH;;AACD,WAAOD,QAAQ,CAACC,IAAhB;AACH,GAbM,CAAP;AAcH,CAfD;;AAiBA,MAAMO,MAAM,GAAG,MAAK;AAChBJ,EAAAA,YAAY,CAACK,UAAb,CAAwB,MAAxB;AACH,CAFD;;AAIA,MAAMC,cAAc,GAAG,MAAK;AACxB;AACA,SAAOJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqB,aAArB,CAAX,CAAP;AACH,CAHD;;AAKA,eAAe;AACXvB,EAAAA,QADW;AAEXQ,EAAAA,KAFW;AAGXW,EAAAA,MAHW;AAIXE,EAAAA;AAJW,CAAf","sourcesContent":["import axios from \"axios\";\nimport jwt from 'jwt-decode'\nconst API_URL = \"http://localhost:8080\";\n\nconst register = (motoristID, firstName, lastName, email, gender, password) =>{\n    return axios.post(API_URL + \"/apiv1/motorist/save\", {\n        motoristID,\n        firstName,\n        lastName,\n        email,\n        gender,\n        password,\n    });\n};\n\nconst login = (username, password) =>{\n    return axios.post(API_URL + \"/api/login\", {\n        username,\n        password,\n    }).then((response) => {\n        if(response.data.accessToken){\n            const decodedUser = jwt(response.data);\n            //localStorage.setItem(\"decodedUser\", decodedUser);\n\n            localStorage.setItem(\"user\", JSON.stringify(response.data));\n\n            //dispatch(actions.authSuccess(response.data.accessToken, decodedUser));\n        }\n        return response.data;\n    });\n};\n\nconst logout = () =>{\n    localStorage.removeItem(\"user\");\n};\n\nconst getCurrentUser = () =>{\n    //return JSON.parse(localStorage.getItem(\"user\"));\n    return JSON.parse(localStorage.getItem(\"decodedUser\"));\n};\n\nexport default {\n    register,\n    login,\n    logout,\n    getCurrentUser,\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}