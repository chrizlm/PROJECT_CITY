{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport AuthService from \"../service/auth.service\";\nimport { useHistory } from \"react-router-dom\";\n\nconst parseJwt = token => {\n  try {\n    return JSON.parse(atob(token.split('.')[1]));\n  } catch (e) {\n    return null;\n  }\n};\n\nexport default function UserLoggedInToken() {\n  _s();\n\n  const history = useHistory();\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n\n  if (user) {\n    const decodedJwt = parseJwt(user.accessToken);\n\n    if (decodedJwt.exp * 1000 < Date.now()) {\n      history.push(\"./Home\");\n      AuthService.logout();\n    }\n  }\n}\n\n_s(UserLoggedInToken, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n  return [useHistory];\n});\n\n_c = UserLoggedInToken;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserLoggedInToken\");","map":{"version":3,"sources":["/Users/christopherlijoodi/Documents/CITY_PARKING_PROJECT/FRONTEND/src/pages/UserLoggedInToken.js"],"names":["React","useEffect","AuthService","useHistory","parseJwt","token","JSON","parse","atob","split","e","UserLoggedInToken","history","user","localStorage","getItem","decodedJwt","accessToken","exp","Date","now","push","logout"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;;AAGA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AACxB,MAAI;AACA,WAAOC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACH,KAAK,CAACI,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAf,CAAP;AACH,GAFD,CAEE,OAAOC,CAAP,EAAU;AACR,WAAO,IAAP;AACH;AACJ,CAND;;AASA,eAAe,SAASC,iBAAT,GAA4B;AAAA;;AAEvC,QAAMC,OAAO,GAAGT,UAAU,EAA1B;AAGA,QAAMU,IAAI,GAAGP,IAAI,CAACC,KAAL,CAAWO,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAb;;AAEI,MAAIF,IAAJ,EAAU;AACN,UAAMG,UAAU,GAAGZ,QAAQ,CAACS,IAAI,CAACI,WAAN,CAA3B;;AAEA,QAAID,UAAU,CAACE,GAAX,GAAiB,IAAjB,GAAwBC,IAAI,CAACC,GAAL,EAA5B,EAAwC;AACpCR,MAAAA,OAAO,CAACS,IAAR,CAAa,QAAb;AACAnB,MAAAA,WAAW,CAACoB,MAAZ;AACH;AACJ;AAER;;GAhBuBX,iB;UAEJR,U;;;KAFIQ,iB","sourcesContent":["import React, {useEffect} from \"react\";\nimport AuthService from \"../service/auth.service\";\nimport {useHistory} from \"react-router-dom\";\n\n\nconst parseJwt = (token) => {\n    try {\n        return JSON.parse(atob(token.split('.')[1]));\n    } catch (e) {\n        return null;\n    }\n};\n\n\nexport default function UserLoggedInToken(){\n\n    const history = useHistory();\n\n\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n\n        if (user) {\n            const decodedJwt = parseJwt(user.accessToken);\n\n            if (decodedJwt.exp * 1000 < Date.now()) {\n                history.push(\"./Home\");\n                AuthService.logout();\n            }\n        }\n\n}"]},"metadata":{},"sourceType":"module"}